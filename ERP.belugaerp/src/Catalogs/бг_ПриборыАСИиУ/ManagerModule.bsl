#Область ПрограммныйИнтерфейс

// Функция возвращает найденный прибор учета, если не найден 
// создает новый и возвращает ссылку на него
// 	Параметры:
// 		ДанныеПрибора - Структура - данные прибора, содержит значения:
// 			* Код - Строка - код прибора
// 			* ИдентификаторРазмещения - Строка - идентификаторо размещения
// 			* Модель - Строка - модель прибора
//	Возвращаемое значение:
//		СправочникСсылка.бг_ПриборыАСИиУ - прибор учета
//
Функция НайтиСоздатьПриборУчета(ДанныеПрибора) Экспорт
	УстановитьПривилегированныйРежим(Истина);
	Результат = Справочники.бг_ПриборыАСИиУ.НайтиПоКоду(ДанныеПрибора.Код);	
	Если Не ЗначениеЗаполнено(Результат) Тогда
		ПриборУчета = Справочники.бг_ПриборыАСИиУ.СоздатьЭлемент();
		ЗаполнитьЗначенияСвойств(ПриборУчета, ДанныеПрибора);
		ПриборУчета.Наименование = "" + ПриборУчета.Код + ": " + ПриборУчета.Модель; 
		ПриборУчета.Записать();
		ОбновитьПовторноИспользуемыеЗначения();
		Результат = ПриборУчета.Ссылка;
	КонецЕсли;
	Возврат Результат;
КонецФункции
	
#КонецОбласти 