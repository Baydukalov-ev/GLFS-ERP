#Область ОбработчикиСобытий

&Перед("ПриКопировании")
Процедура бг_ПриКопировании(ОбъектКопирования)
	
	бг_КодНСИ = "";
	
КонецПроцедуры

&Перед("ПередЗаписью")
Процедура бг_ПередЗаписью(Отказ)
	
	Если ОбменДанными.Загрузка Тогда
		Возврат;
	КонецЕсли;
	
	бг_ОбщегоНазначенияСервер.ПередЗаписьюСправочникаНСИ(Отказ, ЭтотОбъект);
	
	Если Не ЗначениеЗаполнено(бг_КодНСИ) Тогда
		Максимальныйбг_КодНСИ = бг_ОбщегоНазначенияСервер.МаксимальноеЗначениеСтроковогоРеквизитаСправочника(Ссылка, "Марки", "бг_КодНСИ");
		бг_КодНСИ = бг_ОбщегоНазначенияСервер.ИнкрементированнаяСтрока(
			Максимальныйбг_КодНСИ,
			Метаданные.Справочники.Марки.Реквизиты.бг_КодНСИ.Тип.КвалификаторыСтроки.Длина);
	КонецЕсли;
	
КонецПроцедуры

&Перед("ОбработкаПроверкиЗаполнения")
Процедура бг_ОбработкаПроверкиЗаполнения(Отказ, ПроверяемыеРеквизиты)
	
	ПроверяемыеРеквизиты.Добавить("Производитель");
	
КонецПроцедуры

#КонецОбласти
