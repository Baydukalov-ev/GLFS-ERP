#Область ПрограммныйИнтерфейс

// Записывает данные об изменении дат запрета редактирования
//
// Параметры:
//  Выборка - Выборка запроса, на основании которой подлежит запись данных в регистр
//
Процедура ЗаписатьДанные(Выборка) Экспорт

	УстановитьПривилегированныйРежим(Истина);
	
	Набор = РегистрыСведений.бг_ИсторияИзмененийЗапретаРедактирования.СоздатьНаборЗаписей();
	Набор.Отбор.Период.Установить(ТекущаяДатаСеанса());
	
	Пока Выборка.Следующий() Цикл
		
		Запись = Набор.Добавить();
		Запись.Период = Набор.Отбор.Период.Значение;
		ЗаполнитьЗначенияСвойств(Запись, Выборка);
		Запись.Автор = Пользователи.ТекущийПользователь();
		
	КонецЦикла;
	
	Набор.Записать();
	
	УстановитьПривилегированныйРежим(Ложь);

КонецПроцедуры

#КонецОбласти
